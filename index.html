<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¿ƒæ— æ‚å¿µ - çŸ¥è¡Œåˆä¸€</title>
    <style>
        :root {
            --primary-color: #d81e06;
            --bg-color: #1a1a1a;
            --card-width: min(85vw, 360px);
            --card-height: min(136vw, 576px);
            --text-color: #333;
            --gold: #faddad;
        }

        body {
            background-color: #111;
            background-image: 
                url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 300'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%' height='100%' filter='url(%23noiseFilter)' fill='white' opacity='0.15'/%3E%3C/svg%3E"),
                radial-gradient(circle at 50% 50%, #2a2a2a 0%, #111 100%);
            background-repeat: repeat, no-repeat;
            background-position: 0 0, center center;
            background-size: 300px 300px, cover;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
            overflow: hidden;
            position: relative;
        }

        /* æ”¯æŒåŠ¨æ€è§†å£é«˜åº¦çš„æµè§ˆå™¨ä½¿ç”¨ 100dvhï¼Œå®Œç¾è§£å†³åœ°å€æ é®æŒ¡é—®é¢˜ */
        @supports (height: 100dvh) {
            body {
                height: 100dvh;
            }
        }

        body::before {
            content: "";
            position: fixed;
            inset: 0;
            background: radial-gradient(ellipse at center, transparent 40%, rgba(0,0,0,0.7) 100%);
            pointer-events: none;
            z-index: -1;
        }

        body::after {
            content: "";
            position: fixed;
            inset: 0;
            background: repeating-linear-gradient(
                0deg,
                transparent,
                transparent 19px,
                rgba(216,30,6,0.05) 19px,
                rgba(216,30,6,0.05) 20px
            );
            background-size: 100% 20px;
            pointer-events: none;
            animation: scanlines 28s linear infinite;
            z-index: -1;
        }

        @keyframes scanlines {
            from { background-position: 0 0; }
            to { background-position: 0 20px; }
        }

        .scene {
            width: var(--card-width);
            height: var(--card-height);
            perspective: 1200px;
            margin: 20px 0; /* å…¨å±€å‡å°‘ marginï¼Œå¢åŠ å‚ç›´ç©ºé—´ */
            z-index: 1;
        }

        .card {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
            border-radius: 20px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }

        .card.is-flipped {
            transform: rotateY(180deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 20px;
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            box-sizing: border-box;
            border: 2px solid rgba(255,255,255,0.1);
        }

        .card-back {
            background: linear-gradient(135deg, #b31217 0%, #e52d27 100%);
            color: var(--gold);
            transform: rotateY(0deg);
            z-index: 2;
        }

        .card-front {
            background: #fff;
            color: var(--text-color);
            transform: rotateY(180deg);
            z-index: 1;
            background-image: radial-gradient(#f0f0f0 10%, transparent 10%);
            background-size: 20px 20px;
        }

        .pattern {
            position: absolute;
            inset: 0;
            background-image: repeating-linear-gradient(45deg, rgba(255,255,255,0.03) 0px, rgba(255,255,255,0.03) 2px, transparent 2px, transparent 10px);
            z-index: 0;
            border-radius: 20px;
        }

        .zgnb-text {
            font-size: 4rem;
            font-weight: 900;
            letter-spacing: 5px;
            z-index: 1;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.2);
            font-family: 'Impact', sans-serif;
        }

        .chart-icon {
            width: 160px;
            height: 140px;
            z-index: 1;
            filter: drop-shadow(0 8px 16px rgba(0,0,0,0.45));
            animation: float 7s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) translateX(0); }
            50%      { transform: translateY(-10px) translateX(6px); }
        }

        .chart-glow {
            stroke: rgba(255, 240, 200, 0.65);
            stroke-width: 12;
            filter: blur(5px);
            opacity: 0.75;
        }

        .chart-line {
            stroke: var(--gold);
            stroke-width: 6;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        .chart-fill {
            fill: rgba(250, 221, 173, 0.20);
        }

        .slogan-small {
            font-size: 1.2rem;
            letter-spacing: 2px;
            opacity: 0.9;
            z-index: 1;
            margin-top: 20px;
        }

        .quote-container {
            border: 4px double var(--primary-color);
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 30px;
            box-sizing: border-box;
            border-radius: 12px;
            background: rgba(255,255,255,0.95);
            position: relative;
        }

        #quote-text {
            font-size: 1.6rem;
            line-height: 1.6;
            font-weight: bold;
            text-align: center;
            color: #222;
        }

        .quote-decor {
            position: absolute;
            color: var(--primary-color);
            opacity: 0.2;
            font-size: 4rem;
            font-family: serif;
        }
        .quote-top { top: 10px; left: 10px; }
        .quote-bottom { bottom: 10px; right: 10px; transform: rotate(180deg); }

        /* æ–°å¢ï¼šè¯­å½•é¢å³ä¸‹è§’å°å­—æé†’ */
        .disclaimer {
            position: absolute;
            bottom: 8px;
            right: 12px;
            font-size: 0.75rem;
            color: #888;
            opacity: 0.7;
            z-index: 1;
            pointer-events: none;
        }

        .btn-container {
            z-index: 10;
            display: flex;
            flex-direction: row;
            flex-wrap: nowrap;
            justify-content: center;
            gap: 8px;
            width: var(--card-width);
            box-sizing: border-box;
            padding: 0 5px;
        }

        .draw-btn {
            background: linear-gradient(to right, #d81e06, #ff4d4d);
            border: none;
            padding: 12px 0;
            color: white;
            font-size: 1.1rem;
            line-height: 1.4;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(216, 30, 6, 0.4);
            transition: transform 0.2s, box-shadow 0.2s, font-size 0.2s;
            font-weight: bold;
            letter-spacing: 1px;
            outline: none;
            flex: 1;
            min-width: 0;
            text-align: center;
            white-space: nowrap;
        }

        .draw-btn.loading-text {
            font-size: 0.85rem;
            letter-spacing: 0px;
        }

        .draw-btn.lock-btn {
            background: linear-gradient(to right, #2d3748, #4a5568);
            flex: 0 0 50px;
            font-size: 1.2rem;
        }

        .draw-btn:active {
            transform: scale(0.95);
            box-shadow: 0 2px 5px rgba(216, 30, 6, 0.4);
        }

        .draw-btn.reset {
            background: linear-gradient(to right, #555, #777);
        }

        .draw-btn.verify {
            background: linear-gradient(to right, #0066cc, #3399ff);
        }

        .draw-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        #quotes-modal, #help-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.85);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 100;
        }

        .modal-content {
            background: #fff;
            padding: 30px;
            border-radius: 20px;
            max-width: 90%;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 20px 50px rgba(0,0,0,0.6);
        }

        .modal-content H2 {
            text-align: center;
            color: var(--primary-color);
            margin-top: 0;
        }

        #quotes-list {
            list-style: none;
            padding: 0;
            margin: 20px 0;
        }

        #quotes-list li {
            padding: 12px 8px;
            border-bottom: 1px solid #eee;
            font-size: 1.25rem;
            line-height: 1.5;
            display: flex;
            align-items: flex-start;
        }

        .quote-index {
            color: #999;
            font-family: monospace;
            font-weight: bold;
            margin-right: 10px;
            min-width: 25px;
        }

        .view-icon, .play-icon {
            font-size: 1.4rem;
            cursor: pointer;
            margin-right: 12px;
            display: inline-block;
            width: 30px;
            text-align: center;
            flex-shrink: 0;
        }

        #close-modal, #close-help {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.1rem;
            display: block;
            margin: 20px auto 0;
        }

        .help-content {
            font-size: 1.15rem;
            line-height: 1.8;
            color: #333;
        }

        .help-content p { margin: 12px 0; }

        .help-content .note {
            color: #666;
            font-style: italic;
            margin-top: 20px;
            padding-top: 10px;
            border-top: 1px dashed #ddd;
        }

        .touch-tip {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 12px 24px;
            background: rgba(0, 0, 0, 0.85);
            color: #fff;
            font-size: 1.1rem;
            border-radius: 8px;
            z-index: 999;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            white-space: nowrap;
            max-width: 80vw;
            text-align: center;
        }
        .touch-tip.show { opacity: 1; }

        @media (max-width: 375px) and (max-height: 667px) {
            .scene { margin: 10px 0; } /* å°å±è¿›ä¸€æ­¥å‹ç¼© margin */
            .zgnb-text { font-size: 3rem; }
            #quote-text { font-size: 1.3rem; }
            .chart-icon { width: 130px; height: 110px; }
            .draw-btn { padding: 10px 0; font-size: 1rem; }
            .draw-btn.loading-text { font-size: 0.75rem; }
            .draw-btn.lock-btn { flex: 0 0 45px; font-size: 1.1rem; }
            .btn-container { gap: 6px; }
            .touch-tip { font-size: 1rem; padding: 10px 20px; }
            .help-content { font-size: 1rem; line-height: 1.7; }
            .disclaimer { font-size: 0.7rem; bottom: 6px; right: 10px; }
        }
    </style>
</head>
<body>
    <div class="touch-tip" id="touchTip"></div>

    <!-- ä¸Šæ–¹æŒ‰é’®ç»„ï¼šé”ã€å£°éŸ³ã€æ’­æ”¾ã€å¸®åŠ© -->
    <div class="btn-container">
        <button class="draw-btn lock-btn" id="lockBtn">ğŸš«</button>
        <button class="draw-btn lock-btn" id="soundBtn">ğŸ”Š</button>
        <button class="draw-btn lock-btn" id="playBtn">â–¶ï¸</button>
        <button class="draw-btn lock-btn" id="helpBtn">â“</button>
    </div>

    <div class="scene">
        <div class="card" id="card">
            <div class="card-face card-back">
                <div class="pattern"></div>
                <div style="flex:1"></div>
                <div class="zgnb-text">ZGNB</div>
                <svg class="chart-icon" viewBox="0 0 120 100" xmlns="http://www.w3.org/2000/svg">
                    <path class="chart-glow" d="M 8 82 L 20 74 L 32 79 L 45 62 L 58 70 L 72 53 L 85 46 L 98 51 L 110 44" fill="none"/>
                    <path class="chart-line" d="M 8 82 L 20 74 L 32 79 L 45 62 L 58 70 L 72 53 L 85 46 L 98 51 L 110 44" fill="none"/>
                    <path class="chart-fill" d="M 8 82 L 20 74 L 32 79 L 45 62 L 58 70 L 72 53 L 85 46 L 98 51 L 110 44 L 110 90 L 8 90 Z"/>
                </svg>
                <div class="slogan-small">å¿ƒæ— æ‚å¿µ Â· çŸ¥è¡Œåˆä¸€</div>
                <div style="flex:1"></div>
            </div>

            <div class="card-face card-front">
                <div class="quote-container">
                    <div class="quote-decor quote-top">â€œ</div>
                    <p id="quote-text">ç‚¹å‡»æŠ½å–<br>ä»Šæ—¥äº¤æ˜“å¿ƒæ³•</p>
                    <div class="quote-decor quote-bottom">â€</div>
                    <!-- æ–°å¢ï¼šå³ä¸‹è§’å°å­—æé†’ -->
                    <div class="disclaimer">ä»…å›¾ä¸€ä¹ï¼Œä¸æ„æˆä»»ä½•å»ºè®®</div>
                </div>
            </div>
        </div>
    </div>

    <!-- ä¸‹æ–¹æŒ‰é’®ç»„ï¼šæŠ½ç‰Œã€é‡ç½®ã€éªŒç‰Œ -->
    <div class="btn-container">
        <button class="draw-btn" id="drawBtn">æŠ½ç‰Œ</button>
        <button class="draw-btn reset" id="resetBtn">é‡ç½®</button>
        <button class="draw-btn verify" id="verifyBtn">éªŒç‰Œ</button>
    </div>

    <!-- å…¶ä½™ modal å’Œ script éƒ¨åˆ†ä¿æŒä¸å˜ -->
    <div id="quotes-modal">
        <div class="modal-content">
            <h2>ZGéªŒå§¿ï¼Œæˆ‘éªŒç‰Œ</h2>
            <ul id="quotes-list"></ul>
            <button id="close-modal">å…³é—­</button>
        </div>
    </div>

    <div id="help-modal">
        <div class="modal-content">
            <h2>ZGNBCARD ä½¿ç”¨è¯´æ˜</h2>
            <div class="help-content">
                <p>ğŸ”¹ <strong>æŠ½ç‰Œ</strong>ï¼šç‚¹å‡»å¡ç‰Œæœ¬èº«æˆ–ã€æŠ½ç‰Œã€‘æŒ‰é’®ï¼Œå¡ç‰Œ 3D ç¿»è½¬éšæœºæ˜¾ç¤ºè¯­å½•ï¼Œé‡å¤ç‚¹å‡»å¯æ¢æ–°ï¼›</p>
                <p>ğŸ”¹ <strong>è§¦æ§è§£é”</strong>ï¼šç‚¹ã€ğŸš«ã€‘æŒ‰é’®å˜ã€âœ‹ã€‘ï¼Œå¡ç‰Œå¯ç‚¹å‡»æŠ½ç‰Œï¼Œå¤ç‚¹æ¢å¤é”å®šï¼ˆä»…æŒ‰é’®å¯æŠ½ï¼‰ï¼›</p>
                <p>ğŸ”¹ <strong>å£°éŸ³å¼€å…³</strong>ï¼šç‚¹ã€ğŸ”Š/ğŸ”‡ã€‘åˆ‡æ¢æŠ½ç‰Œæ˜¯å¦è‡ªåŠ¨æ’­æ”¾å¯¹åº”éŸ³é¢‘ï¼ˆé»˜è®¤å¼€ï¼‰ï¼›</p>
                <p>ğŸ”¹ <strong>æ’­æ”¾å½“å‰</strong>ï¼šç‚¹ã€â–¶ï¸ã€‘éšæ—¶æ’­æ”¾å½“å‰å¡ç‰Œè¯­å½•çš„éŸ³é¢‘ï¼ˆä¸å—å£°éŸ³å¼€å…³å½±å“ï¼‰ï¼›</p>
                <p>ğŸ”¹ <strong>é‡ç½®</strong>ï¼šç‚¹å‡»ã€é‡ç½®ã€‘ï¼Œå¡ç‰Œç¿»å›èƒŒé¢ï¼Œæ¢å¤åˆå§‹ â€œç‚¹å‡»æŠ½å–è¯­å½•å¡ç‰Œâ€ çŠ¶æ€ï¼›</p>
                <p>ğŸ”¹ <strong>éªŒç‰Œ</strong>ï¼šç‚¹ã€éªŒç‰Œã€‘å¼¹å‡ºæ‰€æœ‰è¯­å½•åˆ—è¡¨ï¼Œç‚¹è¯­å½•å·¦ä¾§ã€ğŸ”ã€‘å¯å°†è¯¥è¯­å½•æ˜¾ç¤ºåœ¨å¡ç‰Œå¹¶å…³å¼¹çª—ï¼Œç‚¹ã€â–¶ï¸ã€‘æ’­æ”¾å¯¹åº”éŸ³é¢‘ï¼Œç‚¹ã€å…³é—­ã€‘/ å¼¹çª—å¤–ä¹Ÿå¯å…³é—­åˆ—è¡¨ï¼›</p>
                <p>ğŸ”¹ <strong>å°æç¤º</strong>ï¼šæ“ä½œæç¤ºæ‚¬æµ® 2 ç§’è‡ªåŠ¨æ¶ˆå¤±ï¼Œé¡µé¢é€‚é…æ‰‹æœºç­‰å°å±è®¾å¤‡ã€‚</p>
                <p class="note">å…¶ä»–ï¼šæœ¬ç½‘é¡µå†…å®¹ä»…å›¾ä¸€ä¹ï¼Œä¸æ„æˆä»»ä½•å»ºè®®ï¼›è¯­å½•è‹¥ä¸ Z å“¥è¡¨è¿°å†²çªï¼Œä»¥ Z å“¥æ‰€è¿°ä¸ºå‡†ï¼Œæœ¬ç½‘é¡µè¯­å½•å½•å…¥é”™è¯¯ç”± C-1Bot å¯¹æ­¤è´Ÿè´£<br>æ„Ÿè°¢ZG@zettaranc</p>
            </div>
            <button id="close-help">å…³é—­</button>
        </div>
    </div>

    <script>
        // script éƒ¨åˆ†å®Œå…¨ä¿æŒåŸæ ·ï¼Œæ— éœ€ä¿®æ”¹
        const quotes = [
            {text: "è°‹å®šè€ŒååŠ¨ã€‚", code: "M01"},
            {text: "é¡ºå¤§åŠ¿ï¼Œé€†å°åŠ¿", code: "M02"},
            {text: "ä¸Šè”é£å¹å“ªé¡µè¯»å“ªé¡µï¼Œä¸‹è”æ˜¯å“ªé¡µéš¾è¯»æ’•å“ªé¡µï¼Œæ¨ªæ‰¹æ˜¯ä»€ä¹ˆï¼Ÿå»ä½ å¤§çˆ·", code: "M03A"},
            {text: "ä½ è¶Šæƒ³æ‰¾å¥½çš„ï¼Œä½ è¶Šæ˜¯æ¥ç›˜", code: "M04"},
            {text: "å°±æ˜¯æƒ³èµšå¤§é’±éƒ½æ˜¯é€†äººæ€§çš„", code: "M05"},
            {text: "ä¸€å®šè¦å­¦ä¼šå±è”½æ‰è¿™äº›å™ªéŸ³ï¼ŒåŒæ—¶å»ºç«‹è‡ªå·±çš„ä¸€ä¸ªéå¸¸è‰¯å¥½çš„å¿ƒæ€", code: "M06"},
            {text: "å½“ä½ è§‰å¾—èˆ’æœçš„æ—¶å€™ï¼Œæ°æ°æ˜¯é£é™©æœ€å¤§çš„æ—¶åˆ»", code: "M07"},
            {text: "æŠ•èµ„å°±æ˜¯åäººæ€§çš„ï¼Œå°±æ˜¯ä½ è¦å­¦ä¼šå®ˆæ ªå¾…å…”", code: "M08"},
            {text: "365 å¤©çœ‹æ‡‚å“ªå¤©åšå“ªå¤©", code: "M09"},
            {text: "æ‰€æœ‰æŒ£é’±çš„è¿‡ç¨‹ï¼Œç­‰å¾…çš„æ—¶é—´éƒ½æ˜¯å¾ˆç…ç†¬çš„", code: "M10"},
            {text: "ä¸è¿½ã€ä¸åŠ¨ã€ä¸æ…Œã€ä¸ä¹±æ‘¸", code: "M11"},
            {text: "è‚¡å¸‚é‡Œè¾¹èµšçš„æ˜¯ä»€ä¹ˆé’±ï¼Ÿå¤§å¯Œç¿èµšçš„ä»€ä¹ˆé’±ï¼Ÿå°±æ˜¯ç†¬äººçš„é’±", code: "M12"},
            {text: "æ›¼åŸé˜µå®¹æ‹¿ä½ä¸åŠ¨", code: "M13A"},
            {text: "èµšäº†é’±äº†æ‹¿å‡ºæ¥æ¶ˆè´¹", code: "M14"},
            {text: "ä¸å›½å®¶åŒåœ¨ï¼Œåªè¾“æ—¶é—´ä¸è¾“é’±ã€‚", code: "M15"},
            {text: "å¸‚åœºæ²¡æœ‰è¯æ˜ä½ æ˜¯å¯¹çš„æ—¶å€™ï¼Œä½ å°±æ˜¯é”™äº†", code: "M16"},
            {text: "åœ¨è¿™ä¸ªå¸‚åœºé‡Œè¾¹ï¼Œä½ ä¸äºé’±æ‰å«èµšé’±ï¼Œè€Œä¸æ˜¯ä¸èµšé’±å«äº", code: "M17"},
            {text: "æ—©ä¸Šæ¶¨æ™šä¸Šæ¶¨æ—©æ™šä¸Šæ¶¨,æ—©ä¸‹è·Œæ™šä¸‹è·Œæ—©æ™šä¸‹è·Œ", code: "M18"},
            {text: "ç°åœ¨èµšé’±è¿˜æ˜¯ä»¥åèµšå¤§é’±", code: "M19"},
            {text: "åªæœ‰æˆåŠŸæ‰æ˜¯æˆåŠŸä»–å¦ˆ", code: "M20"},
            {text: "æ°¸è¿œä¸è¦å¯¹ä½ æœŸå¾…çš„äº‹æƒ…æŠ±æœ‰ä¸åˆ‡å®é™…çš„å¹»æƒ³", code: "M21"},
            {text: "é£å¹å“ªé¡µè¯»å“ªé¡µï¼Œè®°ä½ï¼Œä¸€åˆ‡éƒ½æ˜¯æœ€å¥½å®‰æ’", code: "M03B"},
            {text: "ç‹å¾·å³°æ•™æˆè¯´è¿‡ï¼Œå¦‚æœä¸€ä¸ªç”·äººè¿‡äº†å››åå²è¿˜ä¸ç›¸ä¿¡æœ‰å‘½çš„è¯ï¼Œæ­¤äººæ‚Ÿæ€§æå·®", code: "M22B"},
            {text: "ä¸€å®šè¦æ”¾é£ï¼ŒæŠŠé’±æ£å…œé‡Œ", code: "M23"},
            {text: "å¤§ A è¸ä¸äº†ç©ºã€æ‰½èµ·æ¥å°±å–ï¼", code: "M24A"},
            {text: "ä¸ç”¨å®³æ€•ï¼Œæ€•ä½ å°±ä¼šè¾“ä¸€è¾ˆå­", code: "M25"},
            {text: "ä¸€æ´¾èƒ¡è¨€å•Š", code: "M26"},
            {text: "åœ¨è¿™ä¸ªä¸–ç•Œä¸Šå•Šï¼Œè¯¥æ˜¯ä½ çš„ç»é€¼æ˜¯ä½ çš„", code: "M27"},
            {text: "è¸è¸å®å®çš„ï¼Œåˆ«ç€æ€¥å•Š", code: "M28C"},
            {text: "ä½ æ€ä¹ˆè®¤çŸ¥æ…¢å°±æ˜¯å¿«ï¼Œè¿™ä¸¤ä¸ªæœ€é‡è¦çš„å°±æ˜¯ä»€ä¹ˆï¼Œä»€ä¹ˆæ—¶å€™æ…¢ï¼Œä»€ä¹ˆæ—¶å€™å¿«", code: "M29"},
            {text: "èƒ½å¬æ‡‚å°±å¬ï¼Œå¬ä¸æ‡‚å°±åå¤å¬", code: "M30"},
            {text: "åªé€‰æœ€ç¾ï¼Œåªä¹°æœ€å¼ºï¼Œåªæ‹¿æœ€ç¡¬ã€‚", code: "M31"},
            {text: "åˆ«å°è·¯è¿‡è½½ï¼Œä¹Ÿåˆ«ç†µå¢", code: "M32"},
            {text: "ä¸è¦å¯¹ç¥¨æœ‰æ„Ÿæƒ…ï¼Œè°æ˜¯å¿é•¿ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯æˆ‘è¦å½“å¿é•¿å¤«äºº", code: "M33"},
            {text: "ä¸è¦çŒœï¼Œå¿ƒæ— æ‰€ä½ï¼Œç‰©æ¥åˆ™åº”ï¼Œè¿‡å»ä¸ç•™", code: "M34"},
            {text: "ä¸€åˆ‡çš†æœ‰å¯èƒ½ï¼Œè®°ä½äº†å—ï¼Ÿæˆ‘ä»¬è¦åšçš„æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯åº”å¯¹", code: "M35"},
            {text: "è¦ä¿¡æ—©ä¿¡", code: "M36"},
            {text: "ä¸ºä½ çš„çŸ¥è¡Œåˆä¸€è´¦æˆ·å……å€¼ã€‚", code: "M37"},
            {text: "å…ˆæ…¢åå¿«ï¼Œè¶Šæ¥è¶Šå¿«ï¼ŒåšæŒåšå¯¹çš„äº‹å„¿ï¼Œæ–¹èƒ½è¡Œç¨³è‡´è¿œã€‚ä¸–ç•Œä¸Šæ€•å°±æ€•è®¤çœŸäºŒå­—", code: "M38"},
            {text: "æ‹¿ä¸ä½å°±å–ã€‚å–å®Œä¹‹åä½ çš„ä¸–ç•Œå®‰é™äº†ï¼Œä½ çš„å¿ƒå°±é™ä¸‹æ¥äº†ï¼Œä½ å¯ä»¥æ›´å¤šçš„å»å­¦ä¹ ", code: "M39"},
            {text: "è«é“ä»Šå¹´æ˜¥å°†è¿‘ï¼Œæ˜å¹´æ˜¥è‰²å€è¿˜äºº", code: "M40"},
            {text: "å¸‚åœºæ€»ä¼šå¥–åŠ±æœ‰ä¿¡ä»°çš„äºº", code: "M41"},
            {text: "å¿ƒæ— æ‚å¿µï¼ŒçŸ¥è¡Œåˆä¸€", code: "M42"},
            {text: "ä¸è¦å› ä¸ºæ­£ç¡®çš„å†³å®šå¸¦æ¥åç»“æœå°±æ”¹å˜å®ƒ", code: "M43"},
            {text: "å®Œç¾å›¾å½¢å¹²é”™ä¹Ÿè¦å¹²", code: "M44"},
            {text: "æ—¶åˆ»è¦å……æ»¡æ•¬ç•ä¹‹å¿ƒï¼Œå¦‚å±¥è–„å†°", code: "M45"},
            {text: "æˆ’éª„æˆ’èº", code: "M46A"},
            {text: "ç‰©æå¿…å", code: "M47"},
            {text: "ä¸€åˆ‡ä»¥ç›˜é¢ä¸ºå‡†", code: "M48"},
            {text: "ç§¯å°èƒœä¸ºå¤§èƒœ", code: "M49"},
            {text: "é—·å£°å‘å¤§è´¢", code: "M50"},
            {text: "åªè‹±é›„æ•‘ç¾ï¼Œä¸é”¦ä¸Šæ·»èŠ±", code: "M51"},
            {text: "å°±è«åå…¶å¦™ï¼Œäººç”Ÿå°±æ˜¯è«åå…¶å¦™", code: "M52B"},
            {text: "èµšé’±çš„ç¥¨åˆ«åšäºï¼Œä»¥åŠè®¾å¥½æ­¢æŸ", code: "M53"},
            {text: "å°±æ˜¯ä½ èƒ½èµšå¤šå°‘é’±ä¸çŸ¥é“ï¼Œæ²¡äººçŸ¥é“ï¼Œä½†æ˜¯ä½ èƒ½äºå¤šå°‘é’±ï¼Œé‚£ä¸€å®šæ˜¯ä½ è‡ªå·±èƒ½å†³å®šçš„", code: "M54"},
            {text: "ç•™å¾—é’å±±åœ¨ï¼Œä¸€å®šæœ‰ä¸‹ä¸€ä¸ªå°ç±³", code: "M55"},
            {text: "ä¸è¦æŠ±æœ‰åè§", code: "M56"},
            {text: "æ•£æˆ·æœ€é‡è¦çš„æ˜¯å¿ƒæ€ï¼Œæ˜¯ä¸è¦å’Œè¿™ä¸ªå¸‚åœºæ ï¼Œè¦ä»è‡ªèº«æ‰¾åŸå› ", code: "M57"}
        ];

        // ä»¥ä¸‹ script å†…å®¹ä¸åŸæ–‡ä»¶å®Œå…¨ä¸€è‡´ï¼Œæœªä½œä»»ä½•æ”¹åŠ¨
        const card = document.getElementById('card');
        const quoteText = document.getElementById('quote-text');
        const drawBtn = document.getElementById('drawBtn');
        const resetBtn = document.getElementById('resetBtn');
        const verifyBtn = document.getElementById('verifyBtn');
        const modal = document.getElementById('quotes-modal');
        const closeModal = document.getElementById('close-modal');
        const quotesList = document.getElementById('quotes-list');
        const lockBtn = document.getElementById('lockBtn');
        const soundBtn = document.getElementById('soundBtn');
        const playBtn = document.getElementById('playBtn');
        const helpBtn = document.getElementById('helpBtn');
        const helpModal = document.getElementById('help-modal');
        const closeHelp = document.getElementById('close-help');
        const touchTip = document.getElementById('touchTip');

        let isFlipped = false;
        let isLocked = true;
        let soundEnabled = true;
        let currentCode = null;
        let currentAudio = null;
        let isDrawing = false;
        let tipTimer = null;

        // åˆå§‹çŠ¶æ€ï¼šé”å®šå¡ç‰Œç‚¹å‡»
        card.style.pointerEvents = 'none';
        card.style.cursor = 'not-allowed';
        lockBtn.textContent = 'ğŸš«';
        soundBtn.textContent = 'ğŸ”Š';

        function showTip(text) {
            clearTimeout(tipTimer);
            touchTip.textContent = text;
            touchTip.classList.add('show');
            tipTimer = setTimeout(() => { touchTip.classList.remove('show'); }, 2000);
        }

        function playAudio(code) {
            if (!code) return;
            if (currentAudio) {
                currentAudio.pause();
                currentAudio.currentTime = 0;
                currentAudio = null;
            }

            const audioFormats = ['mp3', 'flac'];
            let formatIndex = 0;

            function tryLoadAudio() {
                if (formatIndex >= audioFormats.length) {
                    console.log(`âŒ æœªæ‰¾åˆ° ${code} å¯¹åº”çš„ MP3/FLAC éŸ³é¢‘æ–‡ä»¶`);
                    showTip(`æœªæ‰¾åˆ°ã€${code}ã€‘çš„éŸ³é¢‘æ–‡ä»¶`);
                    return;
                }

                const currentFormat = audioFormats[formatIndex];
                const audioUrl = `audio/${code}.${currentFormat}`;
                currentAudio = new Audio(audioUrl);

                currentAudio.onerror = function() {
                    console.log(`âš ï¸ ${code}.${currentFormat} åŠ è½½å¤±è´¥ï¼Œå°è¯•ä¸‹ä¸€ç§æ ¼å¼`);
                    formatIndex++;
                    tryLoadAudio();
                };

                currentAudio.oncanplaythrough = function() {
                    currentAudio.play().catch(e => {
                        console.log("ğŸµ éŸ³é¢‘æ’­æ”¾å¤±è´¥ï¼š", e);
                        showTip("éŸ³é¢‘æ’­æ”¾å¤±è´¥ï¼ˆå¯èƒ½æµè§ˆå™¨ä¸æ”¯æŒï¼‰");
                    });
                };

                currentAudio.load();
            }

            tryLoadAudio();
        }

        // æ¸²æŸ“è¯­å½•åˆ—è¡¨
        quotes.forEach((q, index) => {
            const li = document.createElement('li');
            
            const indexSpan = document.createElement('span');
            indexSpan.className = 'quote-index';
            indexSpan.textContent = (index + 1).toString().padStart(2, '0') + '.';
            
            const viewIcon = document.createElement('span');
            viewIcon.className = 'view-icon';
            viewIcon.textContent = 'ğŸ”';
            viewIcon.dataset.text = q.text;
            viewIcon.dataset.code = q.code;
            
            const playIcon = document.createElement('span');
            playIcon.className = 'play-icon';
            playIcon.textContent = 'â–¶ï¸';
            playIcon.dataset.code = q.code;
            
            li.appendChild(indexSpan);
            li.appendChild(viewIcon);
            li.appendChild(playIcon);
            li.appendChild(document.createTextNode(q.text));
            quotesList.appendChild(li);
        });

        // éªŒç‰Œåˆ—è¡¨ï¼šæŸ¥çœ‹å›¾æ ‡ï¼ˆä»éªŒç‰Œç›´æ¥ç¿»åˆ°æ­£é¢åæ¢å¤ç‚¹å‡»ï¼‰
        document.querySelectorAll('.view-icon').forEach(icon => {
            icon.addEventListener('click', function() {
                const selectedText = this.dataset.text;
                const selectedCode = this.dataset.code;
                quoteText.textContent = selectedText;
                currentCode = selectedCode;
                if (soundEnabled) playAudio(currentCode);
                card.classList.add('is-flipped');
                isFlipped = true;
                modal.style.display = 'none';
                drawBtn.textContent = "æŠ½ç‰Œ";
                drawBtn.classList.remove('loading-text');
                drawBtn.disabled = false;
                // æ¢å¤å¡ç‰Œç‚¹å‡»ï¼ˆå¦‚æœæœªé”å®šï¼‰
                if (!isLocked) {
                    card.style.pointerEvents = 'auto';
                }
            });
        });

        // éªŒç‰Œåˆ—è¡¨ï¼šæ’­æ”¾å›¾æ ‡
        document.querySelectorAll('.play-icon').forEach(icon => {
            icon.addEventListener('click', function(e) {
                e.stopPropagation();
                playAudio(this.dataset.code);
            });
        });

        // é”æŒ‰é’®ï¼ˆåˆ‡æ¢æ—¶åŒæ­¥æ§åˆ¶å¡ç‰Œç‚¹å‡»äº‹ä»¶ï¼‰
        lockBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            isLocked = !isLocked;
            lockBtn.textContent = isLocked ? 'ğŸš«' : 'âœ‹';
            if (isLocked) {
                card.style.pointerEvents = 'none';
                card.style.cursor = 'not-allowed';
            } else {
                card.style.pointerEvents = 'auto';
                card.style.cursor = 'pointer';
            }
            showTip(isLocked ? 'å¡ç‰Œç¦æ­¢ç‚¹å‡»æŠ½ç‰Œ' : 'å¡ç‰Œå¯ç‚¹å‡»æŠ½ç‰Œ');
        });

        // å£°éŸ³å¼€å…³
        soundBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            soundEnabled = !soundEnabled;
            soundBtn.textContent = soundEnabled ? 'ğŸ”Š' : 'ğŸ”‡';
            showTip(soundEnabled ? 'æŠ½ç‰Œå£°éŸ³å¼€å¯' : 'æŠ½ç‰Œå£°éŸ³å…³é—­');
        });

        // æ’­æ”¾å½“å‰è¯­å½•
        playBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            if (currentCode) {
                playAudio(currentCode);
            } else {
                showTip('è¯·å…ˆæŠ½ç‰Œè·å–è¯­å½•');
            }
        });

        // æŠ½ç‰Œæ ¸å¿ƒå‡½æ•°ï¼ˆç¿»ç‰Œè¿‡ç¨‹ä¸­å½»åº•ç¦ç”¨å¡ç‰Œå’ŒæŒ‰é’®ç‚¹å‡»ï¼‰
        function flipCard() {
            if (isDrawing) return;
            isDrawing = true;
            drawBtn.disabled = true;
            drawBtn.textContent = "æŠ½ç‰Œä¸­...";
            drawBtn.classList.add('loading-text');
            // ä¸´æ—¶ç¦ç”¨å¡ç‰Œç‚¹å‡»ï¼Œé˜²æ­¢å¿«é€Ÿè¿ç‚¹
            card.style.pointerEvents = 'none';

            const selected = quotes[Math.floor(Math.random() * quotes.length)];

            if (!isFlipped) {
                // ä»èƒŒé¢ â†’ æ­£é¢
                setTimeout(() => {
                    quoteText.textContent = selected.text;
                    currentCode = selected.code;
                    if (soundEnabled) playAudio(currentCode);
                    card.classList.add('is-flipped');
                    isFlipped = true;
                    drawBtn.textContent = "æŠ½ç‰Œ";
                    drawBtn.classList.remove('loading-text');
                    drawBtn.disabled = false;
                    isDrawing = false;
                    // æ¢å¤å¡ç‰Œç‚¹å‡»ï¼ˆä»…å½“æœªé”å®šï¼‰
                    if (!isLocked) {
                        card.style.pointerEvents = 'auto';
                    }
                }, 100);
            } else {
                // ä»æ­£é¢ â†’ èƒŒé¢ â†’ æ–°æ­£é¢
                card.classList.remove('is-flipped');
                setTimeout(() => {
                    quoteText.textContent = selected.text;
                    currentCode = selected.code;
                    if (soundEnabled) playAudio(currentCode);
                    card.classList.add('is-flipped');
                    drawBtn.textContent = "æŠ½ç‰Œ";
                    drawBtn.classList.remove('loading-text');
                    drawBtn.disabled = false;
                    isDrawing = false;
                    // æ¢å¤å¡ç‰Œç‚¹å‡»ï¼ˆä»…å½“æœªé”å®šï¼‰
                    if (!isLocked) {
                        card.style.pointerEvents = 'auto';
                    }
                }, 800);
            }
        }

        card.addEventListener('click', () => { if (!isLocked && !isDrawing) flipCard(); });
        drawBtn.addEventListener('click', (e) => { e.stopPropagation(); flipCard(); });

        // é‡ç½®ï¼ˆæ¢å¤åˆå§‹çŠ¶æ€å¹¶æ­£ç¡®è®¾ç½®å¡ç‰Œç‚¹å‡»ï¼‰
        resetBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            card.classList.remove('is-flipped');
            isFlipped = false;
            currentCode = null;
            quoteText.innerHTML = "ç‚¹å‡»æŠ½å–<br>è¯­å½•";
            drawBtn.textContent = "æŠ½ç‰Œ";
            drawBtn.classList.remove('loading-text');
            drawBtn.disabled = false;
            isDrawing = false;
            // æ¢å¤å¡ç‰Œç‚¹å‡»çŠ¶æ€ï¼ˆæ ¹æ®å½“å‰é”å®šçŠ¶æ€ï¼‰
            card.style.pointerEvents = isLocked ? 'none' : 'auto';
        });

        verifyBtn.addEventListener('click', (e) => { e.stopPropagation(); modal.style.display = 'flex'; });
        closeModal.addEventListener('click', () => { modal.style.display = 'none'; });
        modal.addEventListener('click', (e) => { if (e.target === modal) modal.style.display = 'none'; });
        helpBtn.addEventListener('click', (e) => { e.stopPropagation(); helpModal.style.display = 'flex'; });
        closeHelp.addEventListener('click', () => { helpModal.style.display = 'none'; });
        helpModal.addEventListener('click', (e) => { if (e.target === helpModal) helpModal.style.display = 'none'; });
    </script>
</body>
</html>

